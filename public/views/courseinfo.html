
<div ng-hide="success">
  <h3>{{errorMessage}}</h3>
  <button ng-click="$route.reload()">Return</button>
</div>
<div ng-show="success">
  <h1>Course Detail</h1>
  <div ng-hide="editing">
    <p>Course Code: {{course.courseCode}}</p>
    <p>Course Name: {{course.courseName}}</p>
    <p>Instructor: {{course.prof}}</p>
    <table>
      <tr>
        <th>Day</th>
        <th>Time</th>
        <th>Venue</th>
      </tr>
      <tr ng-repeat="lesson in lessons">
        <td>{{lesson.day.val}}</td>
        <td>{{lesson.time.val}}</td>
        <td>{{lesson.venue}}</td>
      </tr>
    </table>
    <p>
      <button ng-show="admin" ng-click="enableEdit()">Edit Course</button>
      <button ng-show="!adding &amp;&amp; !posted" ng-click="enableAdd()">Add Info</button>
      <button ng-show="!adding" ng-click="$location.path(&quot;/resource/&quot; + course.courseCode)">Resources</button>
      <button ng-show="!adding" ng-click="$location.path(&quot;/discussion/&quot; + course.courseCode)">Discussion</button>
    </p>
  </div>
  <div ng-show="editing">
    <form> 
      <p>Course Code: {{course.courseCode}}</p>
      <p>Course Name: 
        <input type="text" ng-model="edit.courseName"/>
      </p>
      <p>Instructor:
        <input type="text" ng-model="edit.prof"/>
      </p>
      <table>
        <tr>
          <th>Day</th>
          <th>Time</th>
          <th>Venue</th>
          <th></th>
        </tr>
        <tr>
          <td>
            <select ng-model="day" ng-options="d.val for d in days">
              <option value="">--Choose Day--</option>
            </select>
          </td>
          <td>
            <select ng-model="time" ng-options="t.val for t in times">
              <option value="">--Choose Lesson--</option>
            </select>
          </td>
          <td>
            <input type="text" ng-model="venue"/>
          </td>
          <td>
            <button type="button" ng-click="addLesson()">Add Lesson</button>
          </td>
        </tr>
        <tr ng-repeat="lesson in lessons">
          <td>{{lesson.day.val}}</td>
          <td>{{lesson.time.val}}</td>
          <td>{{lesson.venue}}</td>
          <td>
            <button type="button" ng-click="removeLesson($index)">Remove Lesson</button>
          </td>
        </tr>
      </table>
      <p>
        <button type="submit" ng-show="admin" ng-click="editCourse()">Sumbit</button>
      </p>
    </form>
  </div>
  <div ng-show="adding">
    <form>
      <p>Rating: 
        <select ng-model="rating" ng-options="r.val for r in ratings">
          <option value="">--Choose Rating--</option>
        </select>
      </p>
      <p>Outline:</p>
      <p>
        <textarea rows="3" cols="50" ng-model="newInfo.outline" placeholder="At least 30 characters"></textarea>
      </p>
      <p>Assessment Method:</p>
      <p> 
        <textarea rows="3" cols="50" ng-model="newInfo.assessMethod" placeholder="At least 30 characters"></textarea>
      </p>
      <p>Comment:</p>
      <p> 
        <textarea rows="3" cols="50" ng-model="newInfo.comment" placeholder="At least 30 characters"></textarea>
      </p>
      <button type="submit" ng-click="addInfo()">Confirm</button>
    </form>
  </div>
  <Strong>{{course.info.length}} Info:</Strong>
  <div ng-repeat="info in course.info">
    <p>Author: {{info.author}}</p>
    <p>Time: {{info.dateOfComment | date:'d/M/yyyy h:mma'}}</p>
    <p>rating: {{info.rating}}</p>
    <p>Outline:<br/>{{info.outline}}</p>
    <p>Assessment Method:<br/>{{info.assessMethod}}</p>
    <p>Comment:<br/>{{info.comment}}</p>
    <p>
      <button ng-show="admin" ng-click="deleteInfo(info._id)">Delete</button>
    </p>
  </div>
  <p>
    <button ng-click="$location.path(&quot;/dept/&quot; + course.deptCode)">Back</button>
  </p>
</div>